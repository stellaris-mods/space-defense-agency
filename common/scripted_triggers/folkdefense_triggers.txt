
sda_valid_spaceport_module_planet = {
	# --- Snip this into a scripted trigger for ease
	NOT = { has_planet_flag = "ass_target" }
	has_spaceport = yes
	has_spaceport_construction = no
	has_free_spaceport_module_slot = yes
	is_occupied_flag = no
	has_ground_combat = no
	controller = { is_same_value = ROOT.owner }
	# ---
}


# Fortress
# ROOT is the planet, scope is country
fd_canbuild_level_3 = {
	exists = event_target:folksda_oldplatform
	has_technology = "tech_space_defense_station_3"
	fd_atleast_three_offices = yes
	ROOT = {
		check_variable = {
			which = SDAStationAge
			value > 71
		}
	}
}

# Defense Station
# ROOT is the planet, scope is country
fd_canbuild_level_2 = {
	exists = event_target:folksda_oldplatform
	fd_atleast_two_offices = yes
	has_technology = "tech_space_defense_station_2"
	ROOT = {
		check_variable = {
			which = SDAStationAge
			value > 35
		}
	}
}

fd_canbuild_level_1 = {
	fd_atleast_one_office = yes
}


# Country scope
fd_atleast_one_office = {
	check_variable = {
		which = SDAPlanetaryOfficeCount
		value > 0
	}
}
# Country scope
fd_atleast_two_offices = {
	check_variable = {
		which = SDAPlanetaryOfficeCount
		value > 1
	}
}
# Country scope
fd_atleast_three_offices = {
	check_variable = {
		which = SDAPlanetaryOfficeCount
		value > 2
	}
}
# Country scope
fd_atleast_four_offices = {
	check_variable = {
		which = SDAPlanetaryOfficeCount
		value > 3
	}
}

# Battle Fortress
# ROOT is the planet, scope is country
fd_canbuild_level_4 = {
	has_global_flag = "has_nsc_active"
	OR = {
		any_owned_planet = {
			has_building = "building_governors_mansion"
		}
		# Apparently the AI never builds the mansion
		is_ai = yes
	}
	fd_atleast_four_offices = yes
	exists = event_target:folksda_oldplatform
	has_technology = "tech_space_defense_station_3"
	ROOT = {
		check_variable = {
			which = SDAStationAge
			value > 107
		}
	}
}

sda_build_tile_perfect = {
	has_blocker = no
	has_building = no
	has_building_construction = no
	has_any_resource = no
}

sda_build_tile_subpar = {
	has_blocker = no
	has_building = no
	has_building_construction = no
}
